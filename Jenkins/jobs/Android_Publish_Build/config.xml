<?xml version='1.0' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <logRotator class="hudson.tasks.LogRotator">
    <daysToKeep>-1</daysToKeep>
    <numToKeep>100</numToKeep>
    <artifactDaysToKeep>-1</artifactDaysToKeep>
    <artifactNumToKeep>-1</artifactNumToKeep>
  </logRotator>
  <keepDependencies>false</keepDependencies>
  <properties>
    <hudson.plugins.buildblocker.BuildBlockerProperty plugin="build-blocker-plugin@1.4-SNAPSHOT">
      <useBuildBlocker>false</useBuildBlocker>
    </hudson.plugins.buildblocker.BuildBlockerProperty>
    <hudson.queueSorter.PrioritySorterJobProperty plugin="PrioritySorter@1.3">
      <priority>100</priority>
    </hudson.queueSorter.PrioritySorterJobProperty>
    <hudson.model.ParametersDefinitionProperty>
      <parameterDefinitions>
        <hudson.plugins.copyartifact.BuildSelectorParameter plugin="copyartifact@1.27">
          <name>BUILD_SELECTOR</name>
          <description></description>
          <defaultSelector class="hudson.plugins.copyartifact.TriggeredBuildSelector"/>
        </hudson.plugins.copyartifact.BuildSelectorParameter>
      </parameterDefinitions>
    </hudson.model.ParametersDefinitionProperty>
  </properties>
  <scm class="hudson.scm.NullSCM"/>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers/>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.plugins.copyartifact.CopyArtifact plugin="copyartifact@1.27">
      <project>Android</project>
      <filter></filter>
      <target></target>
      <selector class="hudson.plugins.copyartifact.ParameterizedBuildSelector">
        <parameterName>BUILD_SELECTOR</parameterName>
      </selector>
    </hudson.plugins.copyartifact.CopyArtifact>
    <hudson.tasks.Shell>
      <command>#!/bin/bash

#INFO=$(ls archive/*.zip | sed -r &apos;s/.*cm-[0-9\.]+-([0-9]+)-[^-]+-([^-]+)(-.*)?\.zip/\1:\2/g&apos;)
INFO=$(ls archive/*.zip | sed -r &apos;s/.*cm-[0-9\.]+-([0-9]+)-[^-]+-([^-]+)?-(.*)?\.zip/\1:\3/g&apos;)
DATE=${INFO%:*}
LUNCH=${INFO#*:}
REMOTE_DIR=Nightlies/${LUNCH}/${DATE}/

if [[ -z &quot;${LUNCH}&quot; ]] || [[ -z &quot;${DATE}&quot; ]]; then
  echo &apos;NO BUILD!&apos;
  exit 1
fi

export SF_USERNAME=chenxiaolong
export SF_PROJECT=unofficial-cm

bash /hd2/android/sourceforge-upload.sh ${REMOTE_DIR} archive/*






#UPLOAD_DIR=Nightlies/${LUNCH}/${DATE}/
#
## Create directories
#TEMP=&quot;/home/frs/project/unofficial-cm&quot;
#SFTP=&quot;&quot;
#for i in $(echo ${UPLOAD_DIR} | tr &apos;/&apos; &apos;\n&apos;); do
#  TEMP=&quot;${TEMP}/${i}&quot;
#  SFTP=&quot;${SFTP}mkdir ${TEMP}\n&quot;
#done
#
#echo -e &quot;${SFTP}&quot; | sftp chenxiaolong,unofficial-cm@frs.sourceforge.net || true
#
#
## Upload
#for i in archive/*; do
#  echo &quot;Uploading ${i} to ${UPLOAD_DIR} ...&quot;
#
#  COUNTER=0
#  while [ &quot;${COUNTER}&quot; -lt 3 ]; do
#    rsync -e ssh -avP ${i} chenxiaolong@frs.sourceforge.net:/home/frs/project/unofficial-cm/${UPLOAD_DIR}
#    if [ &quot;${?}&quot; -eq 0 ]; then
#      break
#    fi
#    echo &quot;*** FAILED TO UPLOAD ${i}. RETRYING ... ***&quot;
#    let COUNTER++
#  done
#
#  if [ &quot;${COUNTER}&quot; -eq 3 ]; then
#    echo &quot;*** FAILED TO UPLOAD ${i} AFTER 3 TRIES ***&quot;
#    exit 1
#  fi
#done</command>
    </hudson.tasks.Shell>
  </builders>
  <publishers>
    <hudson.plugins.ws__cleanup.WsCleanup plugin="ws-cleanup@0.16">
      <deleteDirs>false</deleteDirs>
      <skipWhenFailed>false</skipWhenFailed>
      <cleanWhenSuccess>true</cleanWhenSuccess>
      <cleanWhenUnstable>true</cleanWhenUnstable>
      <cleanWhenFailure>true</cleanWhenFailure>
      <cleanWhenNotBuilt>true</cleanWhenNotBuilt>
      <cleanWhenAborted>true</cleanWhenAborted>
      <notFailBuild>false</notFailBuild>
      <cleanupMatrixParent>false</cleanupMatrixParent>
    </hudson.plugins.ws__cleanup.WsCleanup>
  </publishers>
  <buildWrappers/>
</project>